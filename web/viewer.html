<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HR HANDBOOK PDF</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f5f5f5;
    }

    canvas {
      border: 1px solid #ccc;
    }
  </style>
</head>

<body>
  <canvas id="pdf-render"></canvas>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const file = urlParams.get('file'); // Path to the PDF file
    const page = parseInt(urlParams.get('page'), 10); // Page number

    // Validate input
    if (!file || isNaN(page)) {
      document.body.innerHTML = '<p style="color: red;">Invalid or missing file/page parameters.</p>';
      throw new Error("Missing 'file' or 'page' parameter in URL.");
    }

    const canvas = document.getElementById("pdf-render");
    const ctx = canvas.getContext("2d");

    const renderPDF = async (filePath, pageNumber) => {
      try {
        // Load the PDF
        const pdf = await pdfjsLib.getDocument(filePath).promise;
        const pdfPage = await pdf.getPage(pageNumber);

        // Set canvas dimensions to match the PDF page
        const viewport = pdfPage.getViewport({ scale: 1.5 });
        canvas.width = viewport.width;
        canvas.height = viewport.height;

        // Render the page onto the canvas
        const renderContext = { canvasContext: ctx, viewport: viewport };
        await pdfPage.render(renderContext).promise;
      } catch (err) {
        console.error("Error rendering PDF:", err);
        document.body.innerHTML = '<p style="color: red;">Failed to load the PDF file.</p>';
      }
    };

    // Call the function to render the specified PDF page
    renderPDF(file, page);
  </script>
</body>

</html>