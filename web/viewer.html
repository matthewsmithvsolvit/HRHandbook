<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>PDF Viewer</title>
  <script type="module">
    import { PDFViewerApplication } from "./pdf_viewer.js";
    import * as pdfjsLib from "./pdfjs.js";

    document.addEventListener("DOMContentLoaded", () => {
      // Set worker source
      pdfjsLib.GlobalWorkerOptions.workerSrc = "./pdf.worker.js";

      // Get query parameters
      const urlParams = new URLSearchParams(window.location.search);
      const file = urlParams.get("file");
      const page = parseInt(urlParams.get("page"), 10);

      // Load the PDF file
      if (file) {
        PDFViewerApplication.open(file);
      }

      // Navigate to the specific page
      if (!isNaN(page)) {
        PDFViewerApplication.eventBus.on("documentload", () => {
          PDFViewerApplication.pdfViewer.currentPageNumber = page;
        });
      }
    });
  </script>
</head>

<body>
  <div id="viewerContainer" style="width: 100%; height: 100vh;">
    <div id="viewer" class="pdfViewer"></div>
  </div>
</body>

</html>